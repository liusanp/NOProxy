[supervisord]
nodaemon=true
logfile=/dev/null
pidfile=/var/run/supervisord.pid
loglevel=info

[program:xvfb]
command=Xvfb :99 -screen 0 1920x1080x24
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
priority=1

[program:chrome]
command=chromium --disable-gpu --no-sandbox --disable-dev-shm-usage --remote-debugging-port=9222 --remote-debugging-address=0.0.0.0 --window-size=1920,1080 --user-data-dir=/tmp/chrome-data --disable-background-networking --disable-extensions --disable-sync --no-first-run --disable-features=TranslateUI
environment=DISPLAY=":99"
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
priority=5

[program:backend]
command=bash -c "sleep 5 && exec python -m uvicorn backend.main:app --host 0.0.0.0 --port 8000 --log-level info"
directory=/app
environment=PYTHONUNBUFFERED="1"
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true
priority=10
